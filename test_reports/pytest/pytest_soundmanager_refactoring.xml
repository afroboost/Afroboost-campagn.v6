<?xml version="1.0" encoding="utf-8"?><testsuites name="pytest tests"><testsuite name="pytest" errors="0" failures="1" skipped="0" tests="30" time="0.284" timestamp="2026-02-06T05:04:13.917642+00:00" hostname="agent-env-e67bfc2c-7978-4090-9c65-c2710d1dff97"><testcase classname="backend.tests.test_soundmanager_refactoring.TestSoundManagerFile" name="test_soundmanager_file_exists" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestSoundManagerFile" name="test_soundmanager_has_isInSilenceHours" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestSoundManagerFile" name="test_soundmanager_has_getSilenceHoursLabel" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestSoundManagerFile" name="test_soundmanager_has_playSoundIfAllowed" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestSoundManagerFile" name="test_soundmanager_has_SOUND_TYPES" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestSoundManagerFile" name="test_soundmanager_constants" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestSoundManagerFile" name="test_soundmanager_file_size" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestChatWidgetImports" name="test_chatwidget_imports_soundmanager" time="0.001" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestChatWidgetImports" name="test_chatwidget_imports_isInSilenceHours" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestChatWidgetImports" name="test_chatwidget_imports_getSilenceHoursLabel" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestChatWidgetImports" name="test_chatwidget_imports_playSoundIfAllowed" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestChatWidgetImports" name="test_chatwidget_imports_SOUND_TYPES" time="0.001" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestUseCallbackOptimization" name="test_playSoundIfEnabled_uses_useCallback" time="0.001" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestUseCallbackOptimization" name="test_playSoundIfEnabled_has_dependencies" time="0.001"><failure message="AssertionError: playSoundIfEnabled should have [soundEnabled, silenceAutoEnabled] dependencies&#10;assert None&#10; +  where None = &lt;function search at 0xfa9a3bf5ccc0&gt;('playSoundIfEnabled = useCallback\\([^)]+\\), \\[soundEnabled, silenceAutoEnabled\\]\\)', '// /components/ChatWidget.js - Widget IA flottant avec capture de leads et reconnaissance automatique\n// Architecture modulaire Afroboost - Utilise l\'API chat améliorée\n// Fonctionnalités: Socket.IO temps réel, notifications push, sons, liens cliquables, suppression historique\n\nimport React, { useState, useEffect, useRef, useCallback, memo } from \'react\';\nimport axios from \'axios\';\nimport { io } from \'socket.io-client\';\nimport { \n  parseMessageContent, \n  notifyPrivateMessage,\n  stopTitleFlash \n} from \'../services/notificationService\';\nimport { \n  isPushSupported, \n  promptForNotifications, \n  registerServiceWorker,\n  isSubscribed \n} from \'../services/pushNotificationService\';\nimport { \n  isInSilenceHours, \n  getSilenceHoursLabel,\n  playSoundIfAllowed,\n  SOUND_TYPES \n} from \'../services/SoundManager\';\nimport EmojiPicker from \'./EmojiPicker\';\n\nconst API = process.env.REACT_APP_BACKEND_URL + \'/api\';\nconst SOCKET_URL = process.env.REACT_APP_BACKEND_URL; // URL Socket.IO (même que backend)\n\n// Clés localStorage pour la mémorisation client (persistance de session)\nconst CHAT_CLIENT_KEY = \'af_chat_client\';\nconst CHAT_SESSION_KEY = \'af...         style={{\n                background: \'none\',\n                border: \'1px solid rgba(255,255,255,0.3)\',\n                borderRadius: \'8px\',\n                padding: \'10px 24px\',\n                color: \'#fff\',\n                cursor: \'pointer\',\n                fontSize: \'12px\'\n              }}\n            &gt;\n              Annuler\n            &lt;/button&gt;\n            &lt;button\n              onClick={handleCropAndUpload}\n              disabled={uploadingPhoto}\n              style={{\n                background: \'linear-gradient(135deg, #9333ea, #6366f1)\',\n                border: \'none\',\n                borderRadius: \'8px\',\n                padding: \'10px 24px\',\n                color: \'#fff\',\n                cursor: uploadingPhoto ? \'wait\' : \'pointer\',\n                fontSize: \'12px\',\n                fontWeight: \'600\',\n                opacity: uploadingPhoto ? 0.7 : 1\n              }}\n              data-testid=&quot;crop-confirm-btn&quot;\n            &gt;\n              {uploadingPhoto ? \'⏳ Upload...\' : \'✓ Valider\'}\n            &lt;/button&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      )}\n    &lt;/&gt;\n  );\n};\n\nexport default ChatWidget;\n')&#10; +    where &lt;function search at 0xfa9a3bf5ccc0&gt; = re.search">backend/tests/test_soundmanager_refactoring.py:129: in test_playSoundIfEnabled_has_dependencies
    assert re.search(pattern, content), "playSoundIfEnabled should have [soundEnabled, silenceAutoEnabled] dependencies"
E   AssertionError: playSoundIfEnabled should have [soundEnabled, silenceAutoEnabled] dependencies
E   assert None
E    +  where None = &lt;function search at 0xfa9a3bf5ccc0&gt;('playSoundIfEnabled = useCallback\\([^)]+\\), \\[soundEnabled, silenceAutoEnabled\\]\\)', '// /components/ChatWidget.js - Widget IA flottant avec capture de leads et reconnaissance automatique\n// Architecture modulaire Afroboost - Utilise l\'API chat améliorée\n// Fonctionnalités: Socket.IO temps réel, notifications push, sons, liens cliquables, suppression historique\n\nimport React, { useState, useEffect, useRef, useCallback, memo } from \'react\';\nimport axios from \'axios\';\nimport { io } from \'socket.io-client\';\nimport { \n  parseMessageContent, \n  notifyPrivateMessage,\n  stopTitleFlash \n} from \'../services/notificationService\';\nimport { \n  isPushSupported, \n  promptForNotifications, \n  registerServiceWorker,\n  isSubscribed \n} from \'../services/pushNotificationService\';\nimport { \n  isInSilenceHours, \n  getSilenceHoursLabel,\n  playSoundIfAllowed,\n  SOUND_TYPES \n} from \'../services/SoundManager\';\nimport EmojiPicker from \'./EmojiPicker\';\n\nconst API = process.env.REACT_APP_BACKEND_URL + \'/api\';\nconst SOCKET_URL = process.env.REACT_APP_BACKEND_URL; // URL Socket.IO (même que backend)\n\n// Clés localStorage pour la mémorisation client (persistance de session)\nconst CHAT_CLIENT_KEY = \'af_chat_client\';\nconst CHAT_SESSION_KEY = \'af...         style={{\n                background: \'none\',\n                border: \'1px solid rgba(255,255,255,0.3)\',\n                borderRadius: \'8px\',\n                padding: \'10px 24px\',\n                color: \'#fff\',\n                cursor: \'pointer\',\n                fontSize: \'12px\'\n              }}\n            &gt;\n              Annuler\n            &lt;/button&gt;\n            &lt;button\n              onClick={handleCropAndUpload}\n              disabled={uploadingPhoto}\n              style={{\n                background: \'linear-gradient(135deg, #9333ea, #6366f1)\',\n                border: \'none\',\n                borderRadius: \'8px\',\n                padding: \'10px 24px\',\n                color: \'#fff\',\n                cursor: uploadingPhoto ? \'wait\' : \'pointer\',\n                fontSize: \'12px\',\n                fontWeight: \'600\',\n                opacity: uploadingPhoto ? 0.7 : 1\n              }}\n              data-testid="crop-confirm-btn"\n            &gt;\n              {uploadingPhoto ? \'⏳ Upload...\' : \'✓ Valider\'}\n            &lt;/button&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      )}\n    &lt;/&gt;\n  );\n};\n\nexport default ChatWidget;\n')
E    +    where &lt;function search at 0xfa9a3bf5ccc0&gt; = re.search</failure></testcase><testcase classname="backend.tests.test_soundmanager_refactoring.TestUseCallbackOptimization" name="test_playSoundIfEnabled_delegates_to_playSoundIfAllowed" time="0.001" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestMemoizedMessageBubble" name="test_memoized_uses_memo" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestMemoizedMessageBubble" name="test_memoized_compares_msg_id" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestMemoizedMessageBubble" name="test_memoized_compares_senderPhotoUrl" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestMemoizedMessageBubble" name="test_memoized_compares_profilePhotoUrl" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestMemoizedMessageBubble" name="test_memoized_returns_true_for_same_message" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestGetSilenceHoursLabelUsage" name="test_toggle_uses_getSilenceHoursLabel" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestGetSilenceHoursLabelUsage" name="test_toggle_shows_dynamic_hours" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestGetSilenceHoursLabelUsage" name="test_console_log_uses_getSilenceHoursLabel" time="0.001" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestFileSizes" name="test_chatwidget_reduced" time="0.001" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestFileSizes" name="test_soundmanager_reasonable_size" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestBackendAPI" name="test_api_health" time="0.097" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestBackendAPI" name="test_promo_code_validation" time="0.046" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestLocalStoragePersistence" name="test_sound_enabled_key" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestLocalStoragePersistence" name="test_silence_auto_key" time="0.000" /><testcase classname="backend.tests.test_soundmanager_refactoring.TestLocalStoragePersistence" name="test_chatwidget_reads_from_localstorage" time="0.001" /></testsuite></testsuites>